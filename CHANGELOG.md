# Changelog

Все значимые изменения этого проекта будут документироваться в этом файле.

## [0.0.1] - 2025-05-25

## [Released]
- Добавлено подтверждение включения и выключения мониторинга на главной странице (модальное окно).
- Исправлена работа кнопки "Добавить": теперь форма всегда сбрасывается и открывается в режиме добавления, даже после редактирования устройства.
- Устранён баг, при котором после редактирования устройства кнопка "Добавить" открывала окно редактирования того же устройства.
- Восстановлена возможность обновления устройства: устранено двойное определение функции editDevice, теперь обновление работает корректно.
- Функции editDevice и saveDevice экспортированы в глобальную область видимости для корректного вызова из HTML (onclick).
- В разделе "Модели устройств" теперь можно редактировать модель, а также добавлено поле терахешей (Th/s) для каждой модели.
- При добавлении нового устройства теперь автоматически заполняется поле "Потребление" при выборе модели.
- Теперь если у устройства изменить потребление и оно будет отличаться от дефолтного значения модели, то поле потребления подсвечивается жёлтым цветом.

## [0.0.2] - 2025-05-25

- Исправлена ошибка с бесконечной загрузкой устройств (ReferenceError: loadDeviceModelsCache is not defined).
- Подсветка ячейки "Потребление" теперь всегда работает корректно после обновления страницы.
- В разделе "Воркеры" объединены кнопки "Показать график" и "Удалить" в одну колонку "Действия" с иконками.
- Оптимизирована отрисовка графика воркера: добавлен выбор режима агрегации и фильтрации.
- Исправлена логика подсветки потребления: теперь всегда подсвечивается, если отличается от дефолтного значения модели.
- Исправлены ошибки с глобальной областью видимости функций для кнопок (ping, delete, showDetail).
- Удалена кнопка "Проверить" из модального окна добавления устройства.

## [0.0.3] - 2025-01-28

✅ Создание системы управления устройствами клиентов
✅ Добавлен новый раздел для отображения устройств конкретного клиента с полной статистикой и управлением
✅ Реализована фильтрация устройств по воркерам клиента (например, клиент "test" видит устройства "test.001", "test.002" и т.д.)
✅ Добавлено удобное управление устройствами клиента: редактирование, удаление, пинг, переключение опроса/ремонта
✅ Создана отдельная страница `/client-devices.html` с полным функционалом как на главной странице

✅ Исправления интерфейса и отображения
✅ Исправлено добавление мощности оборудования: теперь можно вводить киловатты через точку во всех компонентах системы
✅ Убрано лишнее уведомление об успехе в разделе ошибок клиента
✅ 6-я карточка статистики теперь показывает только количество ошибок без ФИО клиента
✅ Добавлен информационный блок с данными о клиенте и кнопкой "Назад к списку клиентов"
✅ Удалено отображение статистики последнего опроса со всех страниц - теперь доступно только на главной странице в верхнем углу

✅ Исправления функционала устройств
✅ Исправлен баг переключателя "ремонт": при включении ремонта устройство корректно снимается с опроса, при выключении возвращается на опрос
✅ Исправлена пагинация: теперь работает идентично главной странице с правильными переходами между страницами
✅ Улучшена логика фильтрации по статусу: учитываются устройства в ремонте и с ошибками
✅ Добавлен автоматический сброс на первую страницу при изменении фильтров

✅ Техническая инфраструктура  
✅ Создан файл `.env` с корректной строкой подключения к MongoDB
✅ Исправлена загрузка переменных окружения в ES модулях: заменен `import 'dotenv/config'` на `import { config } from 'dotenv'; config();`
✅ Исправлена ошибка запуска сервера с undefined переменной MONGO_URI

